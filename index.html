<!doctype html>
<html lang="de">
  <head>
   	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    	<title>Aucobo-Commands</title>
	<style>
		* {
		  box-sizing: border-box;
		}
		
		.main {
		  float:middle;
		  width:60%;
		  top:50%;
		  padding:0 20px;
		  text-align:center;
		  margin-left:auto;
		  margin-right:auto;
		}
		
		@media only screen and (max-width:620px) {
		  /* For mobile phones: */
		  .main{
		    width:100%;
		  }
		}
	</style>
  </head>
  <body>
    	<div style="background-color:#00cf9e;padding:15px;text-align:center">
	    	<h2>Aucobo-Testbefehle</h2>
   	</div>
	<div class="main">
		<p>Kritischer Fehler <button id="kfehler">Senden</button></p>
		<p>Fehlermeldung <button id="fehler">Senden</button></p>
		<p>Repariert <button id="repariert">Senden</button></p>
	</div>  
</body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js" type="text/javascript"></script>
  <Script>
	(function($){
		console.log("ready");
		
		document.getElementById("kfehler").addEventListener("click", function(){
			const headers = new Headers()
			headers.append("Content-Type", "application/json" )
			headers.append("Authorization", "Basic " + btoa("arburg:password"));

			const body = {"Status":"Red", "Maschine":"540"}

			const options = {
				  method: "POST",
				  headers,
				  mode: "cors",
				  body: JSON.stringify(body)
			}

			fetch("https://arburg.aucobo-global.de/connectors/events", options).then(response => {
				console.log(response)
			}).catch(err => {
				console.error("[error] " + err.message)
			})
		});
		
		document.getElementById("fehler").addEventListener("click", function(){
			const headers = new Headers()
			headers.append("Content-Type", "application/json" )
			headers.append("Authorization", "Basic " + btoa("arburg:password"));

			const body = {"Status":"Yellow", "Maschine":"540"}

			const options = {
				  method: "POST",
				  headers,
				  mode: "cors",
				  body: JSON.stringify(body)
			}

			fetch("https://arburg.aucobo-global.de/connectors/events", options).then(response => {
				console.log(response)
			}).catch(err => {
				console.error("[error] " + err.message)
			})
		});
		
		document.getElementById("repariert").addEventListener("click", function(){
			const headers = new Headers()
			headers.append("Content-Type", "application/json" )
			headers.append("Authorization", "Basic " + btoa("arburg:password"));

			const body = {"Status":"Green", "Maschine":"540"}

			const options = {
				  method: "POST",
				  headers,
				  mode: "cors",
				  body: JSON.stringify(body)
			}

			fetch("https://arburg.aucobo-global.de/connectors/events", options).then(response => {
				console.log(response)
			}).catch(err => {
				console.error("[error] " + err.message)
			})
		});
	})(jQuery); 
  </script>
</html>
