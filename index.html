<!doctype html>
<html lang="de">
  <head>
   	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    	<title>Aucobo-Commands</title>
	<style>
		* {
		  box-sizing: border-box;
		}
		
		.main {
		  float:middle;
		  width:60%;
		  top:50%;
		  padding:0 20px;
		  text-align:center;
		  margin-left:auto;
		  margin-right:auto;
		}
		
		.rot{"background-color:red";}
		
		.gelb{"background-color:yellow";}
		
		.blau{"background-color:blue";}
		
		.gruen{"background-color:green";}
		
		@media only screen and (max-width:620px) {
		  /* For mobile phones: */
		  .main{
		    width:100%;
		  }
		}
	</style>
  </head>
  <body>
    	<div style="background-color:#00cf9e;padding:15px;text-align:center">
	    	<h2>Aucobo-Testbefehle</h2>
   	</div>
	<div class="main">
		<p style="background-color:red;">Kritischer Fehler <button id="kfehler">Senden</button></p>
		<p class="yellow">Fehlermeldung <button id="fehler">Senden</button></p>
		<p class="yellow">Wartung <button id="wartung">Senden</button></p>
		<p class="blue">Handbetrieb<button id="handbetrieb">Senden</button></p>
		<p class="green">Produktion <button id="autobetrieb">Senden</button></p>
	</div>  
</body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js" type="text/javascript"></script>
  <Script>
	(function($){
		console.log("ready");
		
		document.getElementById("kfehler").addEventListener("click", function(){
			const headers = new Headers()
			headers.append("Content-Type", "application/json" )
			headers.append("Authorization", "Basic " + btoa("arburg:password"));

			const body = {"machineId":"1", "Halle":"1", "Gruppe":"Linie 1","Maschinen-Typ":"570-A", "Status":"Red", "Fehlercode":"1010", "Fehlertext":"Technisches Problem"}

			const options = {
				  method: "POST",
				  headers,
				  mode: "cors",
				  body: JSON.stringify(body)
			}

			fetch("https://arburg.aucobo-global.de/connectors/events", options).then(response => {
				console.log(response)
			}).catch(err => {
				console.error("[error] " + err.message)
			})
		});
		
		document.getElementById("fehler").addEventListener("click", function(){
			const headers = new Headers()
			headers.append("Content-Type", "application/json" )
			headers.append("Authorization", "Basic " + btoa("arburg:password"));

			const body = {"machineId":"1", "Halle":"1", "Gruppe":"Linie 1","Maschinen-Typ":"570-A", "Status":"Yellow", "Fehlercode":"1013", "Fehlertext":"Kein Material"}

			const options = {
				  method: "POST",
				  headers,
				  mode: "cors",
				  body: JSON.stringify(body)
			}

			fetch("https://arburg.aucobo-global.de/connectors/events", options).then(response => {
				console.log(response)
			}).catch(err => {
				console.error("[error] " + err.message)
			})
		});
		
		document.getElementById("wartung").addEventListener("click", function(){
			const headers = new Headers()
			headers.append("Content-Type", "application/json" )
			headers.append("Authorization", "Basic " + btoa("arburg:password"));

			const body = {"machineId":"1", "Halle":"1", "Gruppe":"Linie 1","Maschinen-Typ":"570-A", "Status":"Yellow", "Fehlercode":"1012", "Fehlertext":"Wartung"}

			const options = {
				  method: "POST",
				  headers,
				  mode: "cors",
				  body: JSON.stringify(body)
			}

			fetch("https://arburg.aucobo-global.de/connectors/events", options).then(response => {
				console.log(response)
			}).catch(err => {
				console.error("[error] " + err.message)
			})
		});
		
		document.getElementById("handbetrieb").addEventListener("click", function(){
			const headers = new Headers()
			headers.append("Content-Type", "application/json" )
			headers.append("Authorization", "Basic " + btoa("arburg:password"));

			const body = {"machineId":"1", "Halle":"1", "Gruppe":"Linie 1","Maschinen-Typ":"570-A", "Status":"Blue", "Fehlercode":"0", "Fehlertext":"In Handbetrieb gewechselt"}

			const options = {
				  method: "POST",
				  headers,
				  mode: "cors",
				  body: JSON.stringify(body)
			}

			fetch("https://arburg.aucobo-global.de/connectors/events", options).then(response => {
				console.log(response)
			}).catch(err => {
				console.error("[error] " + err.message)
			})
		});
		
		document.getElementById("autobetrieb").addEventListener("click", function(){
			const headers = new Headers()
			headers.append("Content-Type", "application/json" )
			headers.append("Authorization", "Basic " + btoa("arburg:password"));

			const body = {"machineId":"1", "Halle":"1", "Gruppe":"Linie 1","Maschinen-Typ":"570-A", "Status":"Green", "Fehlercode":"0", "Fehlertext":"In Produktionsbetrieb gewechselt"}

			const options = {
				  method: "POST",
				  headers,
				  mode: "cors",
				  body: JSON.stringify(body)
			}

			fetch("https://arburg.aucobo-global.de/connectors/events", options).then(response => {
				console.log(response)
			}).catch(err => {
				console.error("[error] " + err.message)
			})
		});
	})(jQuery); 
  </script>
</html>
